<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Articles</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-light.min.css" id="gh-css-light"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-dark.min.css" id="gh-css-dark" disabled/>
<style>
body{background:var(--bg);color:var(--fg);transition:background .2s,color .2s;padding:20px;font-family:Inter,system-ui,Segoe UI,Roboto;}
.container{max-width:1100px;margin:0 auto;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;}
.card{background:var(--card-bg);border-radius:8px;padding:12px;box-shadow:0 2px 8px rgba(0,0,0,.06);height:100%;display:flex;flex-direction:column;}
.card img{width:100%;height:140px;object-fit:cover;border-radius:6px;}
.meta{font-size:13px;color:var(--muted);margin-top:8px;}
:root{--bg:#f6f8fa;--fg:#222;--card-bg:#fff;--muted:#57606a;}
[data-theme="dark"]{--bg:#0b1220;--fg:#c9d1d9;--card-bg:#071022;--muted:#9aa7b2;}
.theme-toggle{position:fixed;right:16px;bottom:16px;padding:8px;border-radius:999px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.12);cursor:pointer;}
[data-theme="dark"] .theme-toggle{background:#0b1220;color:#fff;}
.search{margin-bottom:18px;padding:8px;border-radius:8px;border:1px solid #e1e4e8;background:#fff;}
[data-theme="dark"] .search{background:#071022;border-color:#122033;}
.tag{display:inline-block;background:#eef; padding:4px 8px;border-radius:999px;font-size:12px;margin-right:6px;}
</style>
</head>
<body>
<div class="container markdown-body">
  <h1>Articles</h1>
  <input id="q" class="search" placeholder="æ¤œç´¢... ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚¿ã‚°ãƒ»æ—¥ä»˜ã§æ¤œç´¢" />
  <div id="grid" class="grid"></div>
</div>
<button class="theme-toggle" id="themeToggle">ðŸŒ“</button>

<script>
const articles = {{ARTICLES_JSON}};

function render(list){
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  for(const a of list){
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <a href="${a.url}" style="text-decoration:none;color:inherit;"><img src="${a.thumbnail}" alt="${a.title}"></a>
      <h3 style="margin:10px 0 6px;"><a href="${a.url}" style="text-decoration:none;color:inherit;">${a.title}</a></h3>
      <div class="meta">${a.date} Â· ${a.excerpt}</div>
      <div style="margin-top:auto;padding-top:10px">${a.tags.map(t=>'<span class="tag">'+t+'</span>').join('')}</div>
    `;
    grid.appendChild(div);
  }
}

render(articles);

// simple search
document.getElementById('q').addEventListener('input', (e)=>{
  const q = e.target.value.toLowerCase();
  const filtered = articles.filter(a => (a.title+a.tags.join(' ')+a.date+a.excerpt).toLowerCase().includes(q));
  render(filtered);
});

// theme toggle
(function(){
  const root=document.documentElement;
  const light=document.getElementById('gh-css-light');
  const dark=document.getElementById('gh-css-dark');
  const toggle=document.getElementById('themeToggle');
  function applyTheme(t){
    if(t==='dark'){root.setAttribute('data-theme','dark');dark.disabled=false;light.disabled=true;}
    else {root.removeAttribute('data-theme');dark.disabled=true;light.disabled=false;}
  }
  const stored=localStorage.getItem('theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light');
  applyTheme(stored);
  toggle.addEventListener('click', ()=>{const cur=document.documentElement.getAttribute('data-theme')==='dark'?'dark':'light';const next=cur==='dark'?'light':'dark';localStorage.setItem('theme',next);applyTheme(next);});
})();
</script>
</body>
</html>
